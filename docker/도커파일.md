
### 도커파일
도커파일(Dockerfile)은 도커(Docker)를 사용하여 컨테이너 이미지를 빌드하기 위한 지침을 기술하는 텍스트 파일입니다. 
도커파일은 컨테이너 이미지를 구성하는 데 필요한 단계와 명령어를 정의합니다.
이를 통해 개발자는 일관된 환경과 실행 환경을 제공하여 애플리케이션을 쉽게 배포하고 실행할 수 있습니다.


### 사용법
1. 먼저 os이미지를 다운받는다 항상이게선행되어야 컴퓨터가 되니까 (FROM명령어)
2. 그리고 우분투니까 apt를 사용할텐데 이러한것을 실행시키도록 하는게 도커 명령어는 RUN이다
3. node설치하면 자동으로 npm다운됬으니까 npm을 이용해서 yarn을 다운로드하는데 옵션으로 g(global)왜냐하면 yarn이 더 빠르니까
이러한 과정은 내가 매번 컨테이너 환경을 설정하는것이고 이 이미지를 누가 이미 만들어놓았다....
node라는 이미지가 존재한다 이미지로 다운받으면 리눅스+노드+npm+yarn까지 다 깔려있다.
이미지를 그냥 사용만 하면 되기떄문에 도커파일조차 필요없게되는것 


```
FROM ubuntu:22.04

RUN sudo apt install node.js
RUN sudo npm install -g yarn
```

### node이미지로 바로하는법
FROM은 항상 docker hub로 되어있다  :은 버전을 명시한느것 
1. FROM node:14
2. RUN mkdir myfolder index라는 파일 만들기전  만들기위해서 
3. COPY ./index.js 내컴퓨터 index.js를 복사해서 넣어주기 COPY(도커바깥에있는내용을 복사해줘라는것) 
4.  

```

# 1. 운영체제 및 프로그램 설치(이미 리눅스 node, npm, yarn까지 모두 깔려있는 컴퓨터 다운로드하는 방식)
FROM node:14
# 2. 내컴퓨터에 있는 폴더나 파일을 도커 컴퓨터(이미지) 안으로 복사하기
RUN mkdir myfolder
COPY ./index.js /myfolder/index.js
```
간단하게 하기위해 폴더 지우겠음 

```
# 1. 운영체제 및 프로그램 설치(이미 리눅스 node, npm, yarn까지 모두 깔려있는 컴퓨터 다운로드하는 방식)
FROM node:14
# 2. 내컴퓨터에 있는 폴더나 파일을 도커 컴퓨터(이미지) 안으로 복사하기
COPY ./index.js /index.js

# 3. 도커안에서 index.js 실행시키기 - 모듈설치없이 돌아감??...
RUN node index.js
```


### RUN과 CMD차이 GPT의견
RUN 명령어는 컨테이너 이미지를 빌드할 때 실행되는 명령어로서, 도커 이미지의 구성을 변경하고 새로운 레이어를 생성하는 데 사용됩니다. <br>
반면에 CMD 명령어는 컨테이너가 시작될 때 실행되는 기본 명령어를 지정하는 역할을 합니다.<br>

### 완벽정리 
RUN으로 하면은 RUN까지하고 이미지를 최종적으로 저장 반면 CMD라는 명령어는 이미지 저장시 CMD는 빠진다 그리고 그 이미지를 실행시킬때 사용되는것이다.<br>
즉 실행은 안시키고 저장시킨다음에 누가 실행시킬떄 실행하도록 할려면 CMD명령어를 사용한다.<br>
단, RUN은 여러번 쓸수있지만 CMD명령어는 마지막 한번만 사용할 수 있다



### 참고 상기시키기
참고로 node는 js를 브라우저가 아닌곳에서 실행시키기 위한것이다
그래서 node index.js를 하면 그대로 종료가 된다. console.log를 찍으면 끝난다.
서버로 만들려면은 express라이브러리를 사용하는것이다.
그래서 index.js에 무한루프를 적용시킨 것이다 


### 도커파일 빌드시키기
docker build . (.은 현재위치 그래서 터미널 위치를 도커파일 있는곳으로 이동시켜야함)
도커파일에는 이미지 이름을 줄 수 없고 이미지를 만들기위해 도커파일을 빌드할때 -t 명령어를 통해 이미지 이름을 정할 수 있다.

